<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Random Thoughts - misc</title><link href="/" rel="alternate"></link><link href="/feeds/misc.atom.xml" rel="self"></link><id>/</id><updated>2023-01-27T13:07:33+00:00</updated><entry><title>Idempotent installer script</title><link href="/idempotent-installer-script.html" rel="alternate"></link><published>2023-01-27T13:07:33+00:00</published><updated>2023-01-27T13:07:33+00:00</updated><author><name>Ds886</name></author><id>tag:None,2023-01-27:/idempotent-installer-script.html</id><summary type="html">&lt;p&gt;Tags: programming, bash
Category: Programming&lt;/p&gt;
&lt;h1&gt;Introduction&lt;/h1&gt;
&lt;p&gt;I tend to expiremnt with different ways to bootstrap in agnostic manner&lt;/p&gt;
&lt;p&gt;The following code  is another attempt in managing dependency across platform&lt;/p&gt;
&lt;p&gt;In  terms of usage  it can be  plugged  in  the beginning&lt;/p&gt;
&lt;h1&gt;Variables&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Variable&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;SYS_PACKAGER_CMD&lt;/td&gt;
&lt;td&gt;executable of the packager name&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYS_PACKAGER_CMD_UPDATE_KEYWORD …&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;</summary><content type="html">&lt;p&gt;Tags: programming, bash
Category: Programming&lt;/p&gt;
&lt;h1&gt;Introduction&lt;/h1&gt;
&lt;p&gt;I tend to expiremnt with different ways to bootstrap in agnostic manner&lt;/p&gt;
&lt;p&gt;The following code  is another attempt in managing dependency across platform&lt;/p&gt;
&lt;p&gt;In  terms of usage  it can be  plugged  in  the beginning&lt;/p&gt;
&lt;h1&gt;Variables&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Variable&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;SYS_PACKAGER_CMD&lt;/td&gt;
&lt;td&gt;executable of the packager name&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYS_PACKAGER_CMD_UPDATE_KEYWORD&lt;/td&gt;
&lt;td&gt;update command of the packager (can accept none)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYS_PACKAGER_CMD_INSTALL_KEYWORD&lt;/td&gt;
&lt;td&gt;install command of the packager (must have a value)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYS_DEPS&lt;/td&gt;
&lt;td&gt;Total dependencies (can accept none)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYS_DEPS_SHARED&lt;/td&gt;
&lt;td&gt;Dependecies with universal names across distro&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYS_DEPS_DEBIAN&lt;/td&gt;
&lt;td&gt;Dependecies with names unique to Debain&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYS_DEPS_UBUNTU&lt;/td&gt;
&lt;td&gt;Dependecies with names unique to Ubuntu&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYS_DEPS_ALPINE&lt;/td&gt;
&lt;td&gt;Dependecies with names unique to Alpine&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYS_DEPS_SUSE_BASE&lt;/td&gt;
&lt;td&gt;Dependecies with names unique to SuSe (shared between Leap and Tumbleweed)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYS_DEPS_SUSE_LEAP&lt;/td&gt;
&lt;td&gt;Dependecies with names unique to SuSe Leap (added on top of SYS_DEPS_SUSE_BASE)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYS_DEPS_SUSE_TUMBLEWEED&lt;/td&gt;
&lt;td&gt;Dependecies with names unique to SuSe Tumbleweed (added on top of SYS_DEPS_SUSE_BASE)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYS_DEPS_RHEL_BASE&lt;/td&gt;
&lt;td&gt;Dependecies with names unique to RHEL based distro(shared between fedora, RHEL, rocky, alma)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYS_DEPS_RHEL_FEDORA&lt;/td&gt;
&lt;td&gt;Dependecies with names unique to fedora (added on top of SYS_DEPS_RHEL_BASE)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYS_DEPS_RHEL_RHEL&lt;/td&gt;
&lt;td&gt;Dependecies with names unique to RHEL (added on top of SYS_DEPS_RHEL_BASE)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SYS_DEPS_RHEL_ROCKY&lt;/td&gt;
&lt;td&gt;Dependecies with names unique to Rocky (added on top of SYS_DEPS_RHEL_BASE)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1&gt;Code&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="ch"&gt;#!/bin/sh&lt;/span&gt;
&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-eu

&lt;span class="nv"&gt;SYS_TYPE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;grep&lt;span class="w"&gt; &lt;/span&gt;-E&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;^ID=&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;/etc/os-release&lt;span class="p"&gt;|&lt;/span&gt;awk&lt;span class="w"&gt; &lt;/span&gt;-F&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;{print $2}&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;tr&lt;span class="w"&gt; &lt;/span&gt;-d&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;SYS_PACKAGER_CMD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;none&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;SYS_PACKAGER_CMD_UPDATE_KEYWORD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;none&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;SYS_PACKAGER_CMD_INSTALL_KEYWORD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;none&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;none&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;SYS_DEPS_SHARED&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class="nv"&gt;SYS_DEPS_DEBIAN&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;SYS_DEPS_UBUNTU&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class="nv"&gt;SYS_DEPS_ALPINE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class="nv"&gt;SYS_DEPS_SUSE_BASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;SYS_DEPS_SUSE_LEAP&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;SYS_DEPS_SUSE_TUMBLEWEED&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;


&lt;span class="nv"&gt;SYS_DEPS_RHEL_BASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;SYS_DEPS_RHEL_FEDORA&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;SYS_DEPS_RHEL_RHEL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;SYS_DEPS_RHEL_ROCKY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_TYPE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;none&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="k"&gt;then&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;System wasn&amp;#39;t detected&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nb"&gt;exit&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;

&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS_SHARED&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_TYPE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;alpine&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;apk&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS_ALPINE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;;;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;debian&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;apt&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS_DEBIAN&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;;;&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;ubuntu&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;apt&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS_UBUNTU&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;;;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;opensuse-tumbleweed&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;zypper&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS_SUSE_BASE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS_SUSE_TUMBLEWEED&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;;;&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;opensuse-leap&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;zypper&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS_SUSE_BASE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS_SUSE_LEAP&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;;;&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;fedora&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;dnf&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS_RHEL_BASE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS_RHEL_FEDORA&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;;;&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;rhel&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;dnf&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS_RHEL_BASE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS_RHEL_RHEL&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;;;&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;rocky&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;dnf&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS_RHEL_BASE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS_RHEL_ROCKY&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;;;&lt;/span&gt;
&lt;span class="k"&gt;esac&lt;/span&gt;

&lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;apk&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD_INSTALL_KEYWORD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;add&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD_UPDATE_KEYWORD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;none&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;;;&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;apt&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD_INSTALL_KEYWORD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;install -y&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD_UPDATE_KEYWORD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;update&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;;;&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;zypper&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD_INSTALL_KEYWORD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;install -y&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD_UPDATE_KEYWORD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;update -y&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;;;&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;dnf&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD_INSTALL_KEYWORD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;install -y&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD_UPDATE_KEYWORD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;update -y&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;;;&lt;/span&gt;
&lt;span class="k"&gt;esac&lt;/span&gt;


&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;!&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;none&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="k"&gt;then&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;# shellcheck disable=2086&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$SYS_PACKAGER_CMD_UPDATE_KEYWORD&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;!&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;none&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD_UPDATE_KEYWORD&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;# shellcheck disable=2086&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_PACKAGER_CMD_INSTALL_KEYWORD&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SYS_DEPS&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="misc"></category></entry><entry><title>Lib recommendation - pydoit</title><link href="/lib-recommendation-pydoit.html" rel="alternate"></link><published>2023-01-27T13:07:33+00:00</published><updated>2023-01-27T13:07:33+00:00</updated><author><name>Ds886</name></author><id>tag:None,2023-01-27:/lib-recommendation-pydoit.html</id><summary type="html">&lt;p&gt;Tags: programming, python
Category: Programming&lt;/p&gt;
&lt;h1&gt;Introduction&lt;/h1&gt;
&lt;p&gt;Currently in the workflow/automation tool industry(docker wrappers, Ansible, CI tools,) there seems to be quite a lot of sophistication.&lt;/p&gt;
&lt;p&gt;This kind of sophistication is not bad per-se, As long as it fit the aim of what you do, but in many cases …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Tags: programming, python
Category: Programming&lt;/p&gt;
&lt;h1&gt;Introduction&lt;/h1&gt;
&lt;p&gt;Currently in the workflow/automation tool industry(docker wrappers, Ansible, CI tools,) there seems to be quite a lot of sophistication.&lt;/p&gt;
&lt;p&gt;This kind of sophistication is not bad per-se, As long as it fit the aim of what you do, but in many cases it have the pigeonhole effect where you fit your solution to the tool.&lt;/p&gt;
&lt;p&gt;In addition it is really hard to find the right platform in such condition as you only reach the real and important limitations where it hurts the most and after you are far too deep into the ecosystem the tool provide.&lt;/p&gt;
&lt;p&gt;In order to combat it I've recently looked for alternatives that are more minimalist, which means you own more of the tooling, but also that you can modify them more readily and in the search I've found a nice library called &lt;a href="https://pydoit.org/"&gt;pydoit&lt;/a&gt; which I would like to highlight that can offer solution in case the need is more lightweight.&lt;/p&gt;
&lt;h1&gt;What it is&lt;/h1&gt;
&lt;p&gt;Pydoit is a library/tool that allow you to write your usual workflow needs in straight python. It works by extracting all the function in the modules that start with &lt;em&gt;task_&lt;/em&gt; and running them by order of which he get to them.&lt;/p&gt;
&lt;h1&gt;Strength&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;seamless integration of python functions, as it is basically running a python module.&lt;/li&gt;
&lt;li&gt;shell commands&lt;/li&gt;
&lt;li&gt;Reporter abstraction - each task accumulate to internal data model from which you can extract a report.&lt;/li&gt;
&lt;li&gt;JSON reporter seems to do the work just fine&lt;/li&gt;
&lt;li&gt;Verasity tracking of the commands - handling if command succeeded or failed.(In case of python based if it returned &lt;em&gt;True&lt;/em&gt; or &lt;em&gt;False&lt;/em&gt; and in shell based on non-zero exit)&lt;/li&gt;
&lt;li&gt;Makefile-like target based tooling&lt;/li&gt;
&lt;/ol&gt;
&lt;h1&gt;Use cases&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;A set of complex tasks that are too complex for shell scripts but also need to be portable&lt;/li&gt;
&lt;li&gt;Integrated runner&lt;/li&gt;
&lt;li&gt;Integrating more tightly the workflow engine to a complex application that compiled to native(using bindings) or have heavy use of python&lt;/li&gt;
&lt;li&gt;Simple workflow engine for small on the fly runner with more programmable access&lt;/li&gt;
&lt;/ol&gt;
&lt;h1&gt;Limitation/ambiguous&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;Documentation is not the best However it is relatively small code base which I've found to be pretty hackable and easy to understand.&lt;/li&gt;
&lt;li&gt;A lot of basic thing you usually use naturally in a big ecosystem such as Ansible are now in your hand - This is both a strength but also come with a cost since all the R&amp;amp;D cost and bugs are now from your side rather than from a community and open-source collaboration&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;li&gt;Sometimes unexpected in how the workflow code works due to the reflective methodology - For example if you run a function outside task it will be executed upon loading the module, and sometimes it is not as obvious how to insert your own function.&lt;/li&gt;
&lt;/ol&gt;
&lt;h1&gt;How does a pydoit project can look like&lt;/h1&gt;
&lt;p&gt;During the discovery phase I've found the tooling to be quite versatile and here are few deployment ideas&lt;sup id="fnref:2"&gt;&lt;a class="footnote-ref" href="#fn:2"&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;h2&gt;Using the CLI tool&lt;/h2&gt;
&lt;p&gt;Pydoit by default have a CLI tool which is built using a modular python class.&lt;/p&gt;
&lt;p&gt;In terms of folder structure you need to have a dodo.py with the workflow module and run the doit executable wrapper&lt;/p&gt;
&lt;p&gt;In such context I will also prefer to use it with some Makefile or a shell script just to tidy up unexpected results and have easy expandability when it is needed to create more complex interaction with other tools&lt;/p&gt;
&lt;h3&gt;Folder structure(Plain + INI config)&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;├── dodo.py
├── doit.cfg
└── Makefile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;&lt;a href="https://pydoit.org/tasks.html"&gt;Code(taken from the official documentation)&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;def&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;task_hello&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;&amp;quot;&amp;quot;hello&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;def&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python_hello&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;targets&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;targets&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;output&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;output&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;Python says Hello World!!!\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;actions&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;python_hello&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;targets&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;&amp;quot;hello.txt&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;&lt;a href="https://pydoit.org/configuration.html#doit-cfg"&gt;doit.cfg&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[GLOBAL]&lt;/span&gt;
&lt;span class="na"&gt;backend&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;json&lt;/span&gt;
&lt;span class="na"&gt;reporter&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;json&lt;/span&gt;

&lt;span class="k"&gt;[list]&lt;/span&gt;
&lt;span class="na"&gt;status&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;True&lt;/span&gt;
&lt;span class="na"&gt;subtasks&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;True&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Makefile&lt;sup id="fnref:4"&gt;&lt;a class="footnote-ref" href="#fn:4"&gt;4&lt;/a&gt;&lt;/sup&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;DOIT=$(shell&lt;span class="w"&gt; &lt;/span&gt;command&lt;span class="w"&gt; &lt;/span&gt;-v&lt;span class="w"&gt; &lt;/span&gt;doit)
JQ=$(shell&lt;span class="w"&gt; &lt;/span&gt;command&lt;span class="w"&gt; &lt;/span&gt;-v&lt;span class="w"&gt; &lt;/span&gt;jq)

RESULTS=hello.txt&lt;span class="w"&gt; &lt;/span&gt;__pycache__

.PHONY:&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;clean
all:&lt;span class="w"&gt; &lt;/span&gt;run

run:
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;DOIT&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;|&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;JQ&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;

clean:
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;RM&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-r&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;RESULTS&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Result&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;lt;fullpath&amp;gt;/doit | /usr/bin/jq
{
  &amp;quot;tasks&amp;quot;: [
    {
      &amp;quot;name&amp;quot;: &amp;quot;hello&amp;quot;,
      &amp;quot;result&amp;quot;: &amp;quot;success&amp;quot;,
      &amp;quot;out&amp;quot;: &amp;quot;&amp;quot;,
      &amp;quot;err&amp;quot;: &amp;quot;&amp;quot;,
      &amp;quot;error&amp;quot;: null,
      &amp;quot;started&amp;quot;: &amp;quot;2023-02-05 20:35:56.767689&amp;quot;,
      &amp;quot;elapsed&amp;quot;: 7.319450378417969e-05
    }
  ],
  &amp;quot;out&amp;quot;: &amp;quot;&amp;quot;,
  &amp;quot;err&amp;quot;: &amp;quot;&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;doit Executable + Embedded config&lt;/h2&gt;
&lt;h3&gt;Folder structure(Plain + INI config)&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;├── dodo.py
└── Makefile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;&lt;a href="https://pydoit.org/tasks.html"&gt;Code(taken from the official documentation)&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;DOIT_CONFIG&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;backend&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;json&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;reporter&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;json&amp;#39;&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;


&lt;span class="n"&gt;def&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;task_hello&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;&amp;quot;&amp;quot;hello&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;def&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python_hello&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;targets&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;targets&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;output&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;output&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;Python says Hello World!!!\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;actions&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;python_hello&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;targets&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;&amp;quot;hello.txt&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Makefile&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;DOIT=$(shell&lt;span class="w"&gt; &lt;/span&gt;command&lt;span class="w"&gt; &lt;/span&gt;-v&lt;span class="w"&gt; &lt;/span&gt;doit)
JQ=$(shell&lt;span class="w"&gt; &lt;/span&gt;command&lt;span class="w"&gt; &lt;/span&gt;-v&lt;span class="w"&gt; &lt;/span&gt;jq)

RESULTS=hello.txt&lt;span class="w"&gt; &lt;/span&gt;__pycache__

.PHONY:&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;clean
all:&lt;span class="w"&gt; &lt;/span&gt;run

run:
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;DOIT&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;|&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;JQ&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;

clean:
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;RM&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-r&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;RESULTS&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Result&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;lt;fullpath&amp;gt;/doit | /usr/bin/jq
{
  &amp;quot;tasks&amp;quot;: [
    {
      &amp;quot;name&amp;quot;: &amp;quot;hello&amp;quot;,
      &amp;quot;result&amp;quot;: &amp;quot;success&amp;quot;,
      &amp;quot;out&amp;quot;: &amp;quot;&amp;quot;,
      &amp;quot;err&amp;quot;: &amp;quot;&amp;quot;,
      &amp;quot;error&amp;quot;: null,
      &amp;quot;started&amp;quot;: &amp;quot;2023-02-05 20:35:56.767689&amp;quot;,
      &amp;quot;elapsed&amp;quot;: 7.319450378417969e-05
    }
  ],
  &amp;quot;out&amp;quot;: &amp;quot;&amp;quot;,
  &amp;quot;err&amp;quot;: &amp;quot;&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Overriding the runner&lt;/h2&gt;
&lt;p&gt;The runner is a modular aspect of the system and as such can be implemented in python in an integrated manner&lt;sup id="fnref:3"&gt;&lt;a class="footnote-ref" href="#fn:3"&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;h3&gt;Folder structure&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;├── Makefile
├── run.py
└── workflows
    └── my_workflow.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Code(taken from the &lt;a href="https://pydoit.org/tasks.html"&gt;official documentation&lt;/a&gt; and &lt;a href="https://pydoit.org/configuration.html#configuration-at-dodo-py"&gt;this&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;DOIT_CONFIG&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;backend&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;json&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;reporter&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;json&amp;#39;&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;


&lt;span class="n"&gt;def&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;task_hello&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;&amp;quot;&amp;quot;hello&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;def&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python_hello&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;targets&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;targets&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;output&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;output&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;Python says Hello World!!!\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;actions&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;python_hello&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;targets&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;&amp;quot;hello.txt&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;run.py&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="ch"&gt;#! /usr/bin/env python3&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;

&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;doit.cmd_base&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;ModuleTaskLoader&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;doit.doit_cmd&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;DoitMain&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;__main__&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;workflows&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;my_workflow&lt;/span&gt;
    &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DoitMain&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ModuleTaskLoader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;my_workflow&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:]))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Makefile&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;DOIT=./run.py
PYTHON=$(shell&lt;span class="w"&gt; &lt;/span&gt;command&lt;span class="w"&gt; &lt;/span&gt;-v&lt;span class="w"&gt; &lt;/span&gt;python3)
JQ=$(shell&lt;span class="w"&gt; &lt;/span&gt;command&lt;span class="w"&gt; &lt;/span&gt;-v&lt;span class="w"&gt; &lt;/span&gt;jq)


RESULTS=hello.txt&lt;span class="w"&gt; &lt;/span&gt;__pycache__

.PHONY:&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;clean&lt;span class="w"&gt; &lt;/span&gt;deps

all:&lt;span class="w"&gt; &lt;/span&gt;run

deps:
&lt;span class="w"&gt;    &lt;/span&gt;ifeq&lt;span class="w"&gt; &lt;/span&gt;($(strip&lt;span class="w"&gt; &lt;/span&gt;$(PYTHON)),)
&lt;span class="w"&gt;    &lt;/span&gt;$(error&lt;span class="w"&gt; &lt;/span&gt;&amp;quot;python3&amp;quot;&lt;span class="w"&gt; &lt;/span&gt;not&lt;span class="w"&gt; &lt;/span&gt;found)
&lt;span class="w"&gt;    &lt;/span&gt;endif

&lt;span class="w"&gt;    &lt;/span&gt;ifeq&lt;span class="w"&gt; &lt;/span&gt;($(strip&lt;span class="w"&gt; &lt;/span&gt;$(JQ&lt;span class="w"&gt; &lt;/span&gt;)),)
&lt;span class="w"&gt;    &lt;/span&gt;$(error&lt;span class="w"&gt; &lt;/span&gt;&amp;quot;jq&amp;quot;&lt;span class="w"&gt; &lt;/span&gt;not&lt;span class="w"&gt; &lt;/span&gt;found)
&lt;span class="w"&gt;    &lt;/span&gt;endif

run:
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;PYTHON&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;DOIT&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;|&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;JQ&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;

clean:
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;RM&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-r&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;RESULTS&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Result&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;/usr/bin/python3 ./run.py | /usr/bin/jq
{
  &amp;quot;tasks&amp;quot;: [
    {
      &amp;quot;name&amp;quot;: &amp;quot;hello&amp;quot;,
      &amp;quot;result&amp;quot;: &amp;quot;success&amp;quot;,
      &amp;quot;out&amp;quot;: &amp;quot;&amp;quot;,
      &amp;quot;err&amp;quot;: &amp;quot;&amp;quot;,
      &amp;quot;error&amp;quot;: null,
      &amp;quot;started&amp;quot;: &amp;quot;2023-02-05 20:35:56.767689&amp;quot;,
      &amp;quot;elapsed&amp;quot;: 7.319450378417969e-05
    }
  ],
  &amp;quot;out&amp;quot;: &amp;quot;&amp;quot;,
  &amp;quot;err&amp;quot;: &amp;quot;&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1&gt;Summary&lt;/h1&gt;
&lt;p&gt;I hope the article opened some easier on-boarding and open ideas for newer solutions&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Although there isn't a strict ecosystem like in the case of ansible you still have the pythonic ecosystem and it is possible foreign bindings&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;The code examples are given with free of usage, copying and redistributing&amp;#160;&lt;a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:3"&gt;
&lt;p&gt;This is not strictly necessary but just a personal practice I've found useful. Alternatively you can just run &lt;code&gt;doit | jq&lt;/code&gt; in the folder&amp;#160;&lt;a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:4"&gt;
&lt;p&gt;the following structure is just for the pydoit aspect and can be extended as needed and the norms of the particular codebase&amp;#160;&lt;a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content><category term="misc"></category></entry><entry><title>Tsurune or Three Types of Sport Shows</title><link href="/tsurune-or-three-types-of-sport-shows.html" rel="alternate"></link><published>2023-01-27T13:07:33+00:00</published><updated>2023-01-27T13:07:33+00:00</updated><author><name>Ds886</name></author><id>tag:None,2023-01-27:/tsurune-or-three-types-of-sport-shows.html</id><summary type="html">&lt;p&gt;Tags: anime
Category: Anime&lt;/p&gt;
&lt;h1&gt;English&lt;/h1&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;There is a new Anime show about Archery, called &lt;em&gt;Tusrune&lt;/em&gt; and how a group of teens can't exist without being next to Archery. So far it is fairly average but in many ways disappointing.&lt;/p&gt;
&lt;p&gt;In order to explain in what manner is it disappointing …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Tags: anime
Category: Anime&lt;/p&gt;
&lt;h1&gt;English&lt;/h1&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;There is a new Anime show about Archery, called &lt;em&gt;Tusrune&lt;/em&gt; and how a group of teens can't exist without being next to Archery. So far it is fairly average but in many ways disappointing.&lt;/p&gt;
&lt;p&gt;In order to explain in what manner is it disappointing this post will articulate in broad strokes a particular manner to categorize sport anime shows, both in terms of a developmental timeline but also in terms of change in focus across time.&lt;/p&gt;
&lt;p&gt;Along that the post analyzes the generes in categroical manner but in practice it is a way to articulate a specturm where the three categories are useful to exemplify how shift on it reflect itself.&lt;/p&gt;
&lt;h2&gt;Drama shows with a national motif&lt;/h2&gt;
&lt;p&gt;This is a style that was from the early formation and continued till roughly the mid 80s. among its exemplars are &lt;em&gt;Kyojin no Hoshi&lt;/em&gt;, &lt;em&gt;Tiger Mask&lt;/em&gt; wherein the drama in them focued on the characters but rather in a nationnalist manner.&lt;/p&gt;
&lt;p&gt;This manifested itself both with an exoteric xenophobic aspects such in Tiger mask, but also in showing imperialistic tendencies and imagery such is the case in &lt;em&gt;Kyojin no Hoshi&lt;/em&gt;, where the sport presents itself in a fairly militraistic manner&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt; and with on-screen relating to WW2 where the protagnist forced traning is forced upon him by his dad as continuation of his career which he lost in an injury due to the war.&lt;sup id="fnref:2"&gt;&lt;a class="footnote-ref" href="#fn:2"&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;h2&gt;Human drama&lt;/h2&gt;
&lt;p&gt;Shows of this type, which still focus on the character drama but more in the little everyday sense. It is distinct in important ways but grew alongside national drama.&lt;/p&gt;
&lt;p&gt;An exemplar of them can be seen in the world of Adachi Mitsuru's manga, where the focus became centered upon the daily life of a particular family, and the sport is more used as a background to drive the the character drama.&lt;/p&gt;
&lt;p&gt;From his shows Touch is the most represntative where the focus of the show was unlike the rest on the romantic aspects and alongside included themes such as struggle with a lost, and form the start shown the complex interaction between the two borthers and the love intereset Minami, the gap and differences between the brothers, the self disownent of one brother to give space to the other, and the imbalance of the family's focus that resulted from it.&lt;/p&gt;
&lt;p&gt;Despite that, it is not that this category had just this particular presentation, In another show of Adachi the focus was more weighed toward the sport itself as a core aspect, namely &lt;em&gt;H2&lt;/em&gt;, where the main emphasis was rather dawn upon the raise of a group of boys from the rejected freshman in a baseball group that had a favourtisim of players due to their blood relation, to achieving greatness in the national competition.&lt;/p&gt;
&lt;p&gt;During the show there was sapce for the uman drama invovled as well as developing complex characters, but  alogn with it the main focus of the show was on the games themeselves with the manga going in so far as including full games on a play by play basis and not as a summary(such was the case in Tocuh).&lt;/p&gt;
&lt;h2&gt;Loveletter shows - Shows where the sport in itself is the main character&lt;/h2&gt;
&lt;p&gt;These are shows that started to appear in a later stage of the early to mid 90s and can be glimpsed at by H2 which released at the same time, where the focus in them become the sport itself and the characters used as the engine to explore aspects of the sport as it show itself in the world, both in terms of social interaction and in terms of the activities and the hardship it involves others which engage in it.&lt;/p&gt;
&lt;p&gt;A show in this style can be seen in &lt;a href="https://www.youtube.com/watch?v=bacqrAIdNzM"&gt;Ganba Fly High&lt;/a&gt;, which deals with Gymnastics and most of the progress of the show are focuesd on the type of training and the hardships with the reward that being reaped.&lt;/p&gt;
&lt;h2&gt;Tsurune&lt;/h2&gt;
&lt;p&gt;So far the show feels to me strognly on the third caregroy, with a set of relativly flat characters that used as auxaliry for a passionate showing of the sport in itself.&lt;/p&gt;
&lt;p&gt;But with that I left disappointed from the lack of complexity. While I am not a stranger to the style and actually loved shows like this, the characters themselves feel too much flat with the most I can say about thier "character" is that "they love archery" and there isn't too much of a room of a complex interaction between them or even the genrally normal cliche of rival schools.&lt;/p&gt;
&lt;p&gt;And while there are bishounen that are heavily targeting fangirls in their teen it is generally from my expereince not enough to hold a show together. On the opposite, it tend to give a sense of artficialness to the show as it is the type of shows that on paper present themselves as a closed bet.&lt;/p&gt;
&lt;p&gt;On one side you have the sport as a genere that will affilate to boys and on the other side all the pretty boys which are adored with particular set of girls viewers can be exploited by just the mere hints of queerbaiting that will produce moutnains of fanfics. All of these without ever commiting to any of them.&lt;/p&gt;
&lt;h1&gt;עברית&lt;/h1&gt;
&lt;h2&gt;הקדמה&lt;/h2&gt;
&lt;p&gt;יש את הסדרת קשתות העונה על קבוצת נערים שלא יכולים שלא להתקיים ליד חץ וקשת וביינתיים היא סבירה אבל במידה רבה מאכזבת, לשם להסביר את האכזבה הפוסט אסרטט בקווים כלליים צורה מסויימת לקטלג סדרות ספורט הן מבחינת התפתחות אך בהתמשקות על שינוי בדגש.
כמו כן הפוסט מנתח את הג'אנר בצורה קטגורית אבל בפועל זה יותר ספקטרום שבו הקטגוריות שימושיות כדי להדגיש איך תזוזה עליו מובעת בפועל.&lt;/p&gt;
&lt;h2&gt;סדרות דרמה בעל אופי לאומי&lt;/h2&gt;
&lt;p&gt;זה סגנון שהמשיך עד אמצע שנות ה-80 ככלל אצבע עם סדרות כמו &lt;em&gt;Tiger Mask&lt;/em&gt; או &lt;em&gt;Kyojin no Hoshi&lt;/em&gt; בהם הדרמה הייתה סובבת סביב הספורט אבל בעיקר ממוקדת בדמויות עצמם ובמאבק שלהם בעודם משתפרים בו. הם היו בעל מוטיב לאומני ברובם עם קסנופוביה על פני השטח בסדרות כמו &lt;em&gt;Tiger Mask&lt;/em&gt; או נטיות אמפריליסטיות כמו ב-&lt;em&gt;Kyojin no Hoshi&lt;/em&gt; בו הספורט מוצג בצורה מאוד צבאית&lt;sup id="fnref:3"&gt;&lt;a class="footnote-ref" href="#fn:3"&gt;3&lt;/a&gt;&lt;/sup&gt;, בעל חשיבות לאומית באופייה ועם התייחסות כמעט ישירה למלחמה שקרתה במיקום של האבא כאדם שאיבד את היכולת בשל המלחמה.&lt;sup id="fnref:4"&gt;&lt;a class="footnote-ref" href="#fn:4"&gt;4&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;h2&gt;דרמות אנושיות&lt;/h2&gt;
&lt;p&gt;סדרות בסגנון הזה, עדיין עם דגש על הדרמה האנושית אבל במימד הרבה יותר יומיומי ואנושי במובן הקטן.&lt;/p&gt;
&lt;p&gt;ניתן לראות בעולם של אדאצ'י מיטסורו אבל זה סגנון שצמח במקביל בו הדגש היה על דרמות אנושיות יותר קטנות סביב חיי משפחה מסויימת אך לא מעבר והספורט הוא יותר מהווה רקע.&lt;/p&gt;
&lt;p&gt;דוגמה מייצגת תהיה בסדרות כמו &lt;em&gt;Touch&lt;/em&gt; שמוקדה דווקא בפאן הרומנטי וכלל הצגה של התמודדות עם אובדן ומההתחלה הציב את המוקד באינטרקציה את הדינמיקה המורכבת בין האחים למינאמי, הפער בין האחים, הוותרנות של האח הבוגר כדי לתת לאחיו הקטן יותר מקום, והחוסר איזון במיקוד של המשפחה לאור הצלחת האח הקטן.&lt;/p&gt;
&lt;p&gt;כמו כן זה לא שהיה מדובר בתצורה יחידה ישנם סדרות של אדאצ'י ששמו יותר דגש על הספורט כמו &lt;em&gt;H2&lt;/em&gt;, שם עיקר הדגש זה דווקא על העלייה של קבוצת נערים ממודחים בקבוצה עם תיעדוף למנהל של בית הספר על פניהם לליגה הבין-אזורית. ב
מהלך הסדרה יש מקום לדרמה האנושית ופיתוח דמויות מורכבות דרך הספורט אבל תוך כדי עיקר המניע והמיקוד של הסדרה הוא על המשחקים עצמם עם חלקים נרחבים במנגה שמציגים משחקים בPlay by Play ולא בתימצות כמו בטאץ'.&lt;/p&gt;
&lt;h2&gt;סדרות בהם הדמות הראשית היא הספורט עצמו&lt;/h2&gt;
&lt;p&gt;זה סדרות שהתחילו בשלב יותר מאוחר של התחלה עד אמצע שנות ה-90 ואפשר לראות אותם בדגומה מעל כמו H2 בהם עיקר המיקוד של הסדרה הוא הפעילות של הספורט המתואר בעצמו, בכאלה סדרות הדמויות הם מנוע על מנת לחשוף איך הספורט מביע את עצמו, הן באינטרקציה החברתית, בפעילויות אותם הוא מתווה למשתתפים והקשיים שהוא יוצר.&lt;/p&gt;
&lt;p&gt;סדרה בסגנון ניתן לראות ב-&lt;a href="https://www.youtube.com/watch?v=bacqrAIdNzM"&gt;Ganba Fly High&lt;/a&gt; העוסקת בגימנסטיקה, פרקים שלמים בה מפרטים את האימונים והקשיים בספורט עם התגמול.&lt;/p&gt;
&lt;h2 style="text-align: right"&gt;Tsurune&lt;/h2&gt;

&lt;p&gt;לבינתיים מרגיש לי שהסדרה נופלת על הצד השלישי, עם דמויות יחסית שטוחות אבל תיאור מלא אהבה לספורט דרכם.&lt;/p&gt;
&lt;p&gt;ועם זאת אני במידה מסויימת מרגיש מאוכזב מהירידה בסיבוכיות, בעוד שאני לא זר לסגנון ואפילו אוהב אותו הדמויות עצמם מרגישות שטוחות מדי עם התכונת "אופי" היחידה שאני יכול לחשוב עליה זה שהם אוהבים את הספורט ואין לך יותר מדי סיבוכיות באינטרקציה בינהם מעבר לקלישאות הרגילות בסדרות ספורט של היחס של הקבוצה היריבה וכד'.&lt;/p&gt;
&lt;p&gt;ובעוד שיש בישים והרבה התאמה וכיוונון לבנות בד"כ זה לא מספיק בשביל להחזיק את הסדרה. במידה רבה דווקא להפך, זה גורם לסדרה להרגיש יותר מלאכותית והימור בטוח להפקה.&lt;/p&gt;
&lt;p&gt;מצד אחד יש לך את הספורט שיפנה לקהל הנערים ומצד שני יש לך הרבה נערים שנחשבים יפים בפני קהל הבנות בגיל העשרה שההפקה יכולה לרמוז מספיק בשביל שהם ייצרו פאנפיק עבורם עם קווירבייט קטנים פה ושם. כל זה וההפקה לא צריכה להתחייב לאף אחד מהם.&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;This can be observed straight from the imagery in the &lt;a href="https://www.youtube.com/watch?v=BWJW1avpmLQ"&gt;openning&lt;/a&gt; of the show, alognside the militraistic training routine and the almost national importance as the motivation to the hero&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;See also this facsinating &lt;a href="https://www.youtube.com/watch?v=q0dTxdac6Yo"&gt;analysis&lt;/a&gt; which I haven't thought in it's direction before. It is not neccisraily fitting within this post but it is mostly comes from change of emphasis from analysis of show structure to the video analysis with it's surrounding.&amp;#160;&lt;a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:3"&gt;
&lt;p&gt;אפשר לראות זאת עוד מה&lt;a href="https://www.youtube.com/watch?v=BWJW1avpmLQ"&gt;פתיח&lt;/a&gt;, כמו כן הדגש על שגרת האימונים במהלך הסדרה והשליחות הכמעט לאומית שיש כמוטיבציה לגיבור.&amp;#160;&lt;a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:4"&gt;
&lt;p&gt;ראו גם את ה&lt;a href="https://www.youtube.com/watch?v=q0dTxdac6Yo"&gt;ניתוח&lt;/a&gt; המעניין שלא חשבתי בכיוון שלו. הוא אינו תואם אבל זה מגיע משינוי המיקוד מניתוח ברמת מבנה הסדרות להקשר החימוני של הסדרה.&amp;#160;&lt;a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content><category term="misc"></category></entry></feed>